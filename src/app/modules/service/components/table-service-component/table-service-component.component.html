<div class="table-container w-full rounded-t-lg overflow-hidden">
  <form [formGroup]="filterForm" *ngIf="productsList?.length || !isFilterEmpty">
    <div class="flex flex-wrap gap-2 items-center mb-4">
      <div class="filter-card">
        <app-dropdown
          [options]="scheduleOptions"
          placeholder="Schedule"
          formControlName="product_type"
          [emitId]="true"
        >
        </app-dropdown>
      </div>
      <div class="filter-card">
        <app-dropdown
          [options]="weekDayOptions"
          placeholder="Days"
          formControlName="days_of_week"
          [emitId]="true"
          [idKey]="'value'"
          [multiSelect]="true"
          [closableChip]="false"
        ></app-dropdown>
      </div>
      <div class="filter-card">
        <app-dropdown
          [options]="pricingTypeOptions"
          placeholder="Pricing Type"
          formControlName="pricing_type"
          [emitId]="true"
        ></app-dropdown>
      </div>
      <div class="filter-card">
        <app-dropdown
          [options]="locationOptions"
          placeholder="Location"
          formControlName="location_type"
          [emitId]="true"
          [displayKey]="'location_name'"
          [idKey]="'location_id'"
        >
        </app-dropdown>
      </div>
      <div class="filter-card">
        <app-dropdown
          [options]="visibilityOptions"
          placeholder="Visibility"
          formControlName="status"
          [emitId]="true"
        >
        </app-dropdown>
      </div>
      <!-- <div class="relative mb-2 mr-2">
        <div
          class="flex items-center justify-between py-2 px-3 bg-white rounded border border-gray-300 border-solid rounded-lg filter-card">
          <span>Schedule</span>
          <div class="flex items-center justify-center">
            <img src="../../../../../assets/images/icons/down.svg" alt="">
          </div>
        </div>
        <div class="absolute top-full left-0 w-full z-50">
          <div class="bg-white w-fit min-w-full flex flex-col border border-gray-200 border-solid shadow rounded">
            <button class="px-4 filter-item text-left hover:bg-gray-100">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap">Fixed</div>
            </button>
            <button class="px-4 filter-item text-left hover:bg-gray-100">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap">Flexible</div>
            </button>
          </div>
        </div>
      </div> -->
      <!-- <div class="relative mb-2 mr-2">
        <div
          class="flex items-center justify-between py-2 px-3 bg-white border border-gray-300 border-solid rounded-lg filter-card">
          <span>Days</span>
          <div class="flex items-center justify-center">
            <img src="../../../../../assets/images/icons/down.svg" alt="">
          </div>
        </div>
        <div class="absolute top-full left-0 w-full z-50">
          <div class="bg-white w-fit min-w-full flex flex-col border border-gray-200 border-solid shadow rounded">
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Mon
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Tue
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Wed
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Thu
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Fri
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Sat
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
            <div class="px-4 filter-item text-left hover:bg-gray-100 filter-item">
              <div class="w-full border-b border-gray-300 border-solid py-2 whitespace-nowrap filter-item-div"><label
                  class="check-container">Sun
                  <input type="checkbox">
                  <span class="checkmark"></span>
                </label></div>
            </div>
          </div>
        </div>
      </div>
      <div class="relative mb-2 mr-2">
        <div
          class="flex items-center justify-between py-2 px-3 bg-white rounded border border-gray-300 border-solid rounded-lg filter-card">
          <span>Pricing Type</span>
          <div class="flex items-center justify-center">
            <img src="../../../../../assets/images/icons/down.svg" alt="">
          </div>
        </div>
      </div>
      <div class="relative mb-2 mr-2">
        <div
          class="flex items-center justify-between py-2 px-3 bg-white rounded border border-gray-300 border-solid rounded-lg filter-card">
          <span>Location</span>
          <div class="flex items-center justify-center">
            <img src="../../../../../assets/images/icons/down.svg" alt="">
          </div>
        </div>
      </div>
      <div class="relative mb-2 mr-2">
        <div
          class="flex items-center justify-between py-2 px-3 bg-white rounded border border-gray-300 border-solid rounded-lg filter-card">
          <span>Visibility</span>
          <div class="flex items-center justify-center">
            <img src="../../../../../assets/images/icons/down.svg" alt="">
          </div>
        </div>
      </div> -->
      <div class="flex items-center mb-2 ml-5">
        <button class="text-secondaryBlue font-bold flex items-center" (click)="resetFilterForm()">
          Clear Filters
        </button>
      </div>
    </div>
  </form>
  <table class="table-auto w-full">
    <thead>
      <tr class="bg-gray-100">
        <th class="px-2 py-3 text-left font-semibold">
          <div class="flex items-center">
            <span> Service Name </span>
            <!-- <div class="ml-2">
              <img
                src="../../../../../assets/images/icons/sort.svg"
                alt=""
                srcset=""
                class="transform rotate-180"
              />
            </div> -->
          </div>
        </th>
        <th class="px-2 py-3 text-left font-semibold">Schedule</th>
        <th class="px-2 py-3 text-left font-semibold">Price</th>
        <th class="px-2 py-3 text-left font-semibold">Location</th>
        <th class="px-2 py-3 text-left font-semibold">Visibility</th>
        <th class="px-2 py-3 text-left font-semibold">Actions</th>
        <th class="px-2 py-3 text-left font-semibold"></th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngIf="!productsList.length && isFilterEmpty">
        <tr>
          <td class="italic text-xs pt-5 pb-1 px-2" colspan="7">Sample Service Listing</td>
        </tr>
        <tr class="table-container-borderRow">
          <td class="align-top px-2 py-3">
            <div class="flex items-center">
              <div>
                <div class="w-12 h-12 rounded overflow-hidden">
                  <img
                    src="../../../../../assets/images/services-dummy.png"
                    alt=""
                    class="w-full h-full object-cover"
                  />
                </div>
              </div>
              <span class="italic ml-2">Sports for kids under 3 years</span>
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="flex items-center">
              <span class="italic">Sports for kids under 3 years</span>
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="flex flex-col">
              <span class="italic whitespace-nowrap">$ xx / session</span>
              <span class="italic whitespace-nowrap">$ xxx / 4 sessions</span>
              <!-- <span class="italic whitespace-nowrap">$ xxx / 4 sessions</span>
              <span class="italic whitespace-nowrap">$ xxx / 4 sessions</span> -->
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="flex items-center">
              <span class="italic">Turf City, Singapore</span>
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="flex items-center">
              <span class="italic">Public</span>
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="flex items-center">
              <button class="primary-button w-24" disabled>Share</button>
            </div>
          </td>
          <td class="align-top px-2 py-3">
            <div class="relative flex justify-end">
              <button
                class="table-container-button w-12 h-12 flex items-center justify-center font-semibold rounded-full duration-700"
                disabled
              >
                <svg
                  width="26"
                  height="26"
                  viewBox="0 0 26 26"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7.583 13.27a2.167 2.167 0 1 1-4.333 0 2.167 2.167 0 0 1 4.333 0zM15.167 13.27a2.166 2.166 0 1 1-4.333 0 2.166 2.166 0 0 1 4.333 0zM20.583 15.437a2.166 2.166 0 1 0 0-4.332 2.166 2.166 0 0 0 0 4.332z"
                    class="table-container-button-svgFill"
                  />
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </ng-container>
      <tr class="table-container-borderRow" *ngFor="let product of productsList; let i = index">
        <td class="align-top px-2 py-3">
          <div class="flex items-center">
            <div>
              <div class="w-12 h-12 rounded overflow-hidden">
                <img
                  src="{{
                    product?.product_photos?.[0]?.photo_url
                    ?? product?.product_photos?.[1]?.photo_url
                    ?? product?.product_photos?.[2]?.photo_url
                    ?? '../../../../../assets/images/defualt-image.svg'
                  }}"
                  alt=""
                  class="w-full h-full object-cover"
                />
              </div>
            </div>
            <span class="ml-2">{{ product?.title ?? '-' }}</span>
          </div>
        </td>
        <td class="align-top px-2 py-3">
          <div class="flex items-center">
            <span>{{ product?.class?.class_time_ranges | groupWeekDays }}</span>
          </div>
        </td>
        <td class="align-top px-2 py-3">
          <div class="flex flex-col">
            <span class="whitespace-nowrap">$ {{ product?.price ?? '-' }} / session</span>
            <ng-container *ngFor="let sessionPrice of product?.class?.class_packages">
              <span
                class="whitespace-nowrap"
                *ngIf="sessionPrice?.no_of_sessions && sessionPrice?.price"
              >
                $ {{ sessionPrice.price }} / {{ sessionPrice.no_of_sessions }} sessions
              </span>
            </ng-container>
            <!-- <span class=" whitespace-nowrap">$ xxx / 4 sessions</span> -->
            <!-- <span class=" whitespace-nowrap">$ xxx / 4 sessions</span> -->
          </div>
        </td>
        <td class="align-top px-2 py-3">
          <div class="flex items-center">
            <span class="">{{ product?.class?.business_location?.location_name ?? '-' }}</span>
          </div>
        </td>
        <td class="align-top px-2 py-3">
          <div class="flex items-center">
            <span class="">{{ product?.visibility ?? '' | titlecase }}</span>
          </div>
        </td>
        <td class="align-top px-2 py-3">
          <div class="flex items-center">
            <button
              class="table-container-button w-24 h-12 flex items-center justify-center font-semibold rounded-full duration-700"
            >
              Share
            </button>
            <!-- confrim popup -->
            <div class="flex-1 flex justify-end">
              <app-three-dots
                [actions]="getActions(product)"
                (actionTriggered)="handleAction($event, product)"
              ></app-three-dots>
            </div>
          </div>
        </td>
        <td class="align-top px-2 py-3"></td>
      </tr>
      <tr>
        <td colspan="7">
          <div class="w-full h-12 flex justify-center items-center" *ngIf="true">
            <button class="noborder-button">Load More</button>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="7">
          <div class="w-full" *ngIf="isFilterEmpty && !productsList?.length">
            <app-no-data-service-component [doesProductListExists]="!!productsList?.length"  class="flex flex-1"></app-no-data-service-component>
          </div>
          <app-no-result-service-component
            class="flex flex-1"
            *ngIf="!isFilterEmpty && !productsList?.length"
          >
          </app-no-result-service-component>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<app-modal [(open)]="openProductDeleteModal" [modalConfig]="{ closeOnOutsideClick: true }">
  <h3 class="text-xl font-bold">Delete Service ?</h3>
  <p class="mt-2">This action cannot be undone</p>
  <div class="flex justify-between mt-5">
    <div class="w-1/2 pr-2">
      <button class="secondary-button w-full" (click)="closeDeleteModal()">
        <span>Cancel</span>
      </button>
    </div>
    <div class="w-1/2 pl-2">
      <button class="primary-button w-full" (click)="closeDeleteModal(true)">Yes, Delete</button>
    </div>
  </div>
</app-modal>
